const fs = require("fs-extra");
const path = __dirname + "/ramishaData.json";

// Ensure data file exists
if (!fs.existsSync(path)) {
  fs.writeFileSync(path, JSON.stringify({}));
  console.log("тЬЕ ramishaData.json file created!");
}

module.exports = {
  config: {
    name: "ramisha",
    version: "1.1.0",
    hasPermssion: 0,
    credits: "RAKIB BOSS",
    description: "No prefix girly AI with teach system",
    commandCategory: "fun",
    usages: "No prefix",
    cooldowns: 1,
  },

  handleEvent: async function ({ api, event }) {
    const { threadID, messageID, body } = event;
    if (!body) return;

    let data;

    // Load JSON safely
    try {
      data = JSON.parse(fs.readFileSync(path));
    } catch (e) {
      console.error("тЭМ JSON Load Error:", e);
      data = {};
    }

    const msg = body.toLowerCase();

    // Predefined replies
    const replies = {
      "assalamualaikum": "ржУржпрж╝рж╛рж▓рж╛ржЗржХрзБржо ржЖрж╕рж╕рж╛рж▓рж╛ржо ржЬрж╛ржи тЭдя╕П",
      "ki koro": "ржЖрж░ ржХрж┐ ржХрж░ржмрзЛ рждрзБржорж╛рзЯ ржЫрж╛рзЬрж╛ ржХрж┐ржЫрзБржЗ ржнрж╛рж▓рзЛ рж▓рж╛ржЧрждрзЗржЫрзЗржирж╛ ЁЯе║",
      "tumi ki prem koro": "ржЖржорж┐ ржЖрж░ ржкрзНрж░рзЗржо ржЕржирзЗржХ ржжрзВрж░рзЗ... ржХрзЗржЙ рждрзЛ ржкрзНрж░ржкрзЛржЬржЗ ржХрж░рзЗ ржирж╛ ржЖржорж╛ржХрзЗ ЁЯТФ"
  "ki koro": "рждрзЛржорж╛рж░ ржХржерж╛ржЗ ржнрж╛ржмржЫрж┐ ржмрж╕ тЭдя╕П",
  "tumi ki prem koro": "ржирж╛ ржЧрзЛ, ржкрзНрж░рзЗржо рждрзЛ ржХржкрж╛рж▓рзЗржЗ ржирж╛ржЗ ЁЯШФ",
  "valo acho?": "рждрзБржорж┐ ржЖржЫрзЛ рждрж╛ржЗ ржнрж╛рж▓рзЛ ржЖржЫрж┐ ржЬрж╛ржи ЁЯе░",
  "tumi kothay thako": "рждрзЛржорж╛рж░ ржоржирзЗржЗ ржерж╛ржХрж┐ ржЖржорж┐ ЁЯПбтЭдя╕П",
  "tumi amar": "ржЖржорж┐ рж╢рзБржзрзБ рждрзЛржорж╛рж░ржЗ рж░рж╛ржорж┐рж╢рж╛ ЁЯТЦ",
  "prem korba?": "рждрзБржорж┐ ржЪрж╛ржЗрж▓рзЗ ржПржЦржиржЗ рж░рж╛ржЬрж┐! ЁЯШЙ",
  "onek valo lagce tomar kotha": "рждрзЛржорж╛рж░ ржХржгрзНржарзЗ ржПржоржи рж╕рзБрж░ ржмрзБржЭрж┐ ржХрзЗржЙ рж╢рзБржирзЗржЫрзЗ? ЁЯШН",
  "bhalobaso amake?": "рж╣рзНржпрж╛ржБ ржЧрзЛ, рждрзЛржорж╛рж░ ржЬржирзНржпржЗ рждрзЛ ржирж┐ржГрж╢рзНржмрж╛рж╕ ЁЯТМ",
  "kiss debo?": "ржЙржорзНржоржо... ржПржХржЯрзБ рж▓ржЬрзНржЬрж╛ ржкрж╛ржЪрзНржЫрж┐ ЁЯЩИ",
  "tumi single naki mingel": "рждрзЛржорж╛рж░ ржЬржирзНржп single ready! ЁЯШЬ",
  "tomar premik ke?": "рждрзБржорж┐ ржЫрж╛ржбрж╝рж╛ рждрзЛ ржХрзЗржЙ ржирзЗржЗ рж░рзЗ ржЬрж╛ржи ЁЯШШ",
  "gussa koro?": "ржирж╛ ржЧрзЛ, рждрзЛржорж╛рзЯ ржнрж╛рж▓рзЛржмрж╛рж╕рж┐ рждрж╛ржЗ рж░рж╛ржЧ ржХрж░рж┐ржирж╛ тЭдя╕П",
  "tumi onek cute": "рждрзБржорж┐ ржмрж▓рзЛ ржмрж▓рзЗржЗ ржоржирзЗ рж╣рзЯ cute ЁЯШЪ",
  "chumu debo?": "ржЖрж╕рзЛ, ржХржкрж╛рж▓рзЗ ржПржХржЯрж╛ ржжрзЗржЗ ЁЯШ│",
  "tumi biya korba amar sathe": "рждрзБржорж┐ ржЪрж╛ржЗрж▓рзЗ ржПржЦржиржЗ ржкрж╛рждрзНрж░рзА ржЖржорж┐ ЁЯШМЁЯТН",
  "tumi amar moner manush": "рждрзБржорж┐ рждрзЛ ржЖржорж╛рж░ рж╣рзГржжрзЯрзЗрж░ рж░рж╛ржЬрж╛ ЁЯТШ",
  "valobashi bolte parba?": "ржнрж╛рж▓рзЛржмрж╛рж╕рж┐ рждрзЛржорж╛ржХрзЗ, ржЪрж┐рж░ржжрж┐ржи тЭдя╕П",
  "r ki koro": "рждрзЛржорж╛рж░ рж╕рзНржмржкрзНржирзЗ ржШрзБрж░рзЗ ржмрзЗрзЬрж╛ржЗ ЁЯШ┤ЁЯТл",
  "tumi r ki paro?": "рждрзЛржорж╛ржХрзЗ ржнрж╛рж▓рзЛржмрж╛рж╕рждрзЗ ржкрж╛рж░рж┐ ржЕржирзЗржХ ржЕржирзЗржХ ЁЯе║",
  "kal keno message dao nai?": "рждрзЛржорж╛рж░ ржЕржнрж┐ржорж╛ржи ржЫрж┐рж▓ ржмрзБржЭрж┐? рж╕рж░рж┐ ржЬрж╛ржи ЁЯе╣",
  "tumi amar sathe ghumao?": "рж╣рзНржпрж╛ржБ рждрзЛ! рж╕рзНржмржкрзНржирзЗ ржкрзНрж░рждрж┐рж░рж╛рждрзЗ ржжрзЗржЦрж╛ рж╣рзЯ ЁЯШЙ",
  "r ki lagbe tomay": "рждрзБржорж┐ ржерж╛ржХрж▓рзЗржЗ рж╕ржм ржХрж┐ржЫрзБ ржкрзБрж░рж╛ тЭдя╕П",
  "toke chara ami parbo na": "ржЖржорж┐ржУ рждрзЛ рждрзЛржорж╛рзЯ ржЫрж╛рзЬрж╛ ржЕржирзНржзржХрж╛рж░ ЁЯШв",
  "miss korchi": "ржЖржорж┐ржУ рждрзЛржорж╛рзЯ ржнрзАрж╖ржг ржорж┐рж╕ ржХрж░ржЫрж┐ ржЬрж╛ржи ЁЯе║",
  "na re ami gussa": "рждрж╛рж╣рж▓рзЗ ржПржХржЯрж╛ ржЪрзБржорзБ ржжрж┐рзЯрзЗ ржорж╛ржл ржХрж░рзЛ ржирж╛ ржкрзНрж▓рж┐ржЬ? ЁЯШУ",
  "amake call dao": "ржЖрж╕ржЫрж┐ рж░рзЗ ржХрж▓ ржжрж┐рждрзЗ... ржХрж╛ржирзЗржХрж╢ржи рж╣рзГржжрзЯрзЗрж░ ЁЯТЮ",
  "tomar voice onek valo": "рждрзБржорж┐ рж╢рзБржирзЛ ржмрж▓рзЗржЗ ржнрж╛рж▓рзЛ рж▓рж╛ржЧрзЗ ржЬрж╛ржи ЁЯе░",
  "breakup korbo": "ржкрзНрж▓рж┐ржЬ ржирж╛ ржЬрж╛ржи! ржоржиржЯрж╛ ржнрзЗржЩрзЗ ржпрж╛ржмрзЗ ЁЯТФ",
  "ami kichu bolte chai": "рж╢рзБржиржЫрж┐ ржЬрж╛ржи ржоржи ржжрж┐рзЯрзЗ тЭдя╕П",
  "ajke onek sad": "рждрж╛рж╣рж▓рзЗ ржЖржорж┐ рждрзЛржорж╛рж░ ржорзБржЦрзЗ рж╣рж╛рж╕рж┐ ржлрзЛржЯрж╛ржмрзЛ ЁЯМ╕",
  "valentine e ki diba": "ржЖржорж╛рж░ рж╣рзГржжрзЯржЯрж╛ ржжрзЗржмрзЛ ЁЯТЭ",
  "tumi onek pagol": "рждрзЛржорж╛рж░ ржкрзНрж░рзЗржорзЗржЗ рждрзЛ ржкрж╛ржЧрж▓ рж╣ржЗржЫрж┐ ЁЯШЙ",
  "selfie dao": "ржжрзЗржЗ ржирж╛! рждрзЛржорж╛рж░ ржЬржирзНржп рж╕рж╛ржЬрж╛ржЗржЫрж┐ ржЖржЬ ЁЯШМЁЯУ╕",
  "tumi onek bhalo": "рждрзБржорж┐ ржмрж▓рж▓рзЗ ржмрж┐рж╢рзНржмрж╛рж╕ ржХрж░рждрзЗ ржоржи ржЪрж╛рзЯ ЁЯШЗ",
  "phone koro": "ржХрж▓ ржжрж┐рж▓рзЗ рждрзЛржорж╛рж░ ржХржгрзНржарзЗ рж╢рж╛ржирзНрждрж┐ ржкрж╛ржмрзЛ ЁЯл╢",
  "ami tumay valobasi": "ржЖржорж┐ ржУ рждрзЛржорж╛рзЯ ржмрзЗржБржЪрзЗ ржерж╛ржХрждрзЗ ржнрж╛рж▓рзЛржмрж╛рж╕рж┐ ЁЯШШ",
  "nindite parso?": "рж╣рзБржо, рждрзБржорж╛рзЯ ржнрзЗржмрзЗ ржнрзЗржмрзЗржЗ ржШрзБржо ржЖрж╕рж▓рзЛ ржирж╛ ржХрж╛рж▓ рж░рж╛рждрзЗ ЁЯШ┤ЁЯТн",
  "tumi taka chai naki bhalobasha": "ржЖржорж┐ рж╢рзБржзрзБ рждрзЛржорж╛рж░ ржнрж╛рж▓рзЛржмрж╛рж╕рж╛ ржЪрж╛ржЗ ЁЯТШ",
  "tumi kemon bou hoba": "ржПржХржжржо рж▓ржХрзНрж╖рзНржорзА ржЖрж░ рж░рзЛржорж╛ржирзНржЯрж┐ржХ рж╕рзНрждрзНрж░рзА ЁЯШЗЁЯТЛ",
  "kokhon dekha hobe": "рждрзЛржорж╛рж░ ржЪрзЛржЦрзЗ ржЪрзЛржЦ рж░рж╛ржЦрж╛рж░ ржЕржкрзЗржХрзНрж╖рж╛рзЯ ржЖржЫрж┐ ржЬрж╛ржи ЁЯШН",
  "pagol ami": "рждрзЛржорж╛рж░ ржЬржирзНржп ржкрж╛ржЧрж▓ рж╣рж▓рзЗ ржжрзЛрж╖рзЗрж░ ржХрж┐? ЁЯЩГ",
  "r ki bolba": "рждрзЛржорж╛рж░ ржорзБржЦрзЗ рж╢рзБржзрзБ 'ржнрж╛рж▓рзЛржмрж╛рж╕рж┐' рж╢рзБржирждрзЗ ржЪрж╛ржЗ ЁЯе╣",
  "tumi kajer bou hoba?": "рж╣рзНржпрж╛ржБ ржЧрзЛ, рж╕рзНржмрж╛ржорзА рж╕рзЗржмрж╛ ржЖржорж╛рж░ рж░ржХрзНрждрзЗ ЁЯШЙ",
  "tumi chhuye dilay": "ржоржиржЯрж╛ ржХрзЗржБржкрзЗ ржУржарзЗ, ржХрзЗржоржи ржЬрж╛ржирж┐ рж▓рж╛ржЧрзЗ ЁЯТУ",
  "tumi sad hole": "рждрзЛржорж╛рж░ ржкрж╛рж╢рзЗ ржмрж╕рзЗ ржорж╛ржерж╛рзЯ рж╣рж╛ржд ржмрзБрж▓рж╛ржмрзЛ ЁЯТЖтАНтЩАя╕П",
  "bou banabi?": "рждрзБржорж┐ ржЪрж╛ржЗрж▓рзЗ ржЖржорж┐ ржПржХрзНрж╖рзБржирж┐ рждрзЛржорж╛рж░ рж░рж╛ржорж┐рж╢рж╛ рж╣рждрзЗ рж░рж╛ржЬрж┐ ЁЯС░тАНтЩАя╕П",
  "tumay niye shopno": "ржкрзНрж░рждрж┐ржжрж┐ржи рж░рзЗ ржЬрж╛ржи, рж╢рзБржзрзБ рждрзБржорж┐ ржЖрж░ ржЖржорж┐ ЁЯТС",
  "kon din biya korba": "рждрзЛржорж╛рж░ ржбрзЗржЯ ржарж┐ржХ ржХрж░рж▓рзЗржЗ рж░рж╛ржЬрж┐ ржЖржорж┐ ЁЯТН"
    };

    if (replies[msg]) {
      return api.sendMessage(replies[msg], threadID, messageID);
    }

    if (data[msg]) {
      return api.sendMessage(data[msg], threadID, messageID);
    }

    // Teach
    if (msg.startsWith("ramisha teach ")) {
      const input = body.slice(14).split(" - ");
      if (input.length < 2)
        return api.sendMessage("тЭМ рж╕ржарж┐ржХ ржлрж░ржорзНржпрж╛ржЯ: Ramisha teach [message] - [reply]", threadID, messageID);

      const key = input[0].toLowerCase().trim();
      const value = input[1].trim();

      data[key] = value;

      try {
        fs.writeFileSync(path, JSON.stringify(data, null, 2));
        console.log(`тЬЕ Learned: "${key}" => "${value}"`);
        return api.sendMessage(`тЬЕ рж╢рзЗржЦрж╛ржирзЛ рж╣рж▓:\nЁЯУЭ "${key}" тЮд "${value}"`, threadID, messageID);
      } catch (err) {
        console.error("тЭМ Write Error:", err);
        return api.sendMessage("тЭМ рж╢рзЗржЦрж╛ржирзЛ ржпрж╛рзЯржирж┐, ржлрж╛ржЗрж▓ рж╕ржорж╕рзНржпрж╛!", threadID, messageID);
      }
    }

    // Remove
    if (msg.startsWith("ramisha teach remove ")) {
      const key = body.slice(22).toLowerCase().trim();
      if (!data[key])
        return api.sendMessage("ЁЯШХ ржПржЯрж╛ рждрзЛ ржЖржорж┐ рж╢рж┐ржЦрж┐ржЗржирж┐!", threadID, messageID);

      delete data[key];

      try {
        fs.writeFileSync(path, JSON.stringify(data, null, 2));
        console.log(`ЁЯЧСя╕П Removed: "${key}"`);
        return api.sendMessage(`ЁЯЧСя╕П "${key}" рж╢рзЗржЦрж╛ ржорзБржЫрзЗ ржлрзЗрж▓рж╛ рж╣ржпрж╝рзЗржЫрзЗ`, threadID, messageID);
      } catch (err) {
        console.error("тЭМ Remove Error:", err);
        return api.sendMessage("тЭМ ржорзБржЫрзЗ ржлрзЗрж▓рж╛ ржпрж╛рзЯржирж┐!", threadID, messageID);
      }
    }
  },

  run: async function () {}
};
